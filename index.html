<html>
  <head>
    <meta charset="UTF-8" />
    <meta content="width=device-width,initial-scale=1.0" name="viewport" />
    <title>Pignat</title>
    <link
      rel="shortcut icon"
      href="https://cdn.3dverse.com/assets/3dverse-wordmark.svg"
    />
    <link rel="stylesheet" href="./style.css" />
  </head>

  <body>
    <script>

    // when video ends
    let currentTime;
    function onPlayerStateChange(event) {
        if ((event.data === YT.PlayerState.PLAYING)&&(initOk)) {
          // Mettez à jour la position temporelle toutes les secondes
          setInterval(() => {
              currentTime = player.getCurrentTime();
              console.log("Position temporelle : " + currentTime.valueOf() + " secondes");

              if (currentTime.valueOf()>((3*60)+51)){
                    etatVideo = 15;
              }else if (currentTime.valueOf()>((3*60)+36)){
                    etatVideo = 14;
              }else if (currentTime.valueOf()>((3*60)+29)){
                    etatVideo = 13;
              }else if (currentTime.valueOf()>((3*60)+23)){
                    etatVideo = 12;
              }else if (currentTime.valueOf()>((3*60)+18)){
                    etatVideo = 11;
              }else if (currentTime.valueOf()>((2*60)+30)){
                    etatVideo = 10;
              }else if (currentTime.valueOf()>((2*60)+26)){
                    etatVideo = 9;
              }else if (currentTime.valueOf()>((2*60)+12)){
                    etatVideo = 8;
              }else if (currentTime.valueOf()>((2*60)+2)){
                    etatVideo = 7;
              }else if (currentTime.valueOf()>(60+40)){
                    etatVideo = 6;
              }else if (currentTime.valueOf()>(60+36)){
                    etatVideo = 5;
              }else if (currentTime.valueOf()>(60+16)){
                    etatVideo = 4;
              }else if (currentTime.valueOf()>55){
                    etatVideo = 3;
              }else if (currentTime.valueOf()>41){
                    etatVideo = 2;
              }else{
                    etatVideo = 1;
              };

              if (etatTempo!=etatVideo){
                switch(etatVideo){
                  case 1 :
                    SDK3DVerse.extensions.LabelDisplay.onLabelClicked(overview[0]);
                  break; 
                  case 2 :
                    SDK3DVerse.extensions.LabelDisplay.onLabelClicked(bouilleur[0]);
                  break; 
                  case 3 :
                    SDK3DVerse.extensions.LabelDisplay.onLabelClicked(MiseSousTension[0]);
                  break; 
                  case 4 :
                    SDK3DVerse.extensions.LabelDisplay.onLabelClicked(ExplicationDalleDoutons[0]);
                  break; 
                  case 5 :
                    SDK3DVerse.extensions.LabelDisplay.onLabelClicked(Marche[0]);
                  break; 
                  case 6 :
                    SDK3DVerse.extensions.LabelDisplay.onLabelClicked(BoutonnerieAlarme[0]);
                  break; 
                  case 7 :
                    SDK3DVerse.extensions.LabelDisplay.onLabelClicked(ReglageDebitEauFroide[0]);
                  break; 
                  case 8 :
                    SDK3DVerse.extensions.LabelDisplay.onLabelClicked(AlarmeDebitEauFroide[0]);
                  break; 
                  case 9 :
                    SDK3DVerse.extensions.LabelDisplay.onLabelClicked(FermetureBouilleur[0]);
                  break; 
                  case 10 :
                    SDK3DVerse.extensions.LabelDisplay.onLabelClicked(DemarrageChauffeDalle[0]);
                  break; 
                  case 11 :
                    SDK3DVerse.extensions.LabelDisplay.onLabelClicked(DemarrageChauffebouilleur[0]);
                  break; 
                  case 12 :
                    SDK3DVerse.extensions.LabelDisplay.onLabelClicked(ChangementConsigne[0]);
                  break; 
                  case 13 :
                    SDK3DVerse.extensions.LabelDisplay.onLabelClicked(Ebullition[0]);
                  break; 
                  case 14 :
                    SDK3DVerse.extensions.LabelDisplay.onLabelClicked(MiseEnRegime[0]);
                  break; 
                  case 15 :
                    SDK3DVerse.extensions.LabelDisplay.onLabelClicked(TeteReflux[0]);
                  break; 
                }
              }
              etatTempo=etatVideo;

          }, 1000);
      }
  }

</script>
    <div class="canvas-container">
      <!-- CANVAS -->
      <canvas
        id="display-canvas"
        tabindex="1"
        oncontextmenu="event.preventDefault()"
      ></canvas>
      
    </div>

    <!-- Modal machine -->
    <!-- fiche modal tpc3000 -->
    <div id="tpc3000" class="modal">
      <div class="content">
        <h1 class="nomMachine">Batch continuous distillation</h1>
        <p class="infosMachine">
          <ul>
            <li><p>Metering pump.</p></li>
            <li><p>Electrical pre-heater.</p></li>
            <li><p>3 feeding level on the column.</p></li>
            <li><p>Glass shell heater equipped with a resistance overflow tube.</p></li>
            <li><p>Glass Column with Multiknit packing and SS Sampling flange.</p></li>
            <li><p>Glass reflux head, with reflux dividing solenoid valve.</p></li>
            
            <li><h2>Instrumentation</h2></li>
            <li><p>Temperature probes Pt100Ω.</p></li>
            <li><p>Differential pressure transmitter.</p></li>
            <li><p>Flowmeter.</p></li>
            <li><p>Level sensor.</p></li>
            <li><p>Touch screen with data acquisition.</p></li>
          </ul>
        </p>
      </div>
    </div>

    <!-- fiche modal upb1000 -->
    <div id="upb1000" class="modal">
      <div class="content">
        <h1 class="nomMachine">Bioethanol pilot 25L</h1>
        <p class="infosMachine">
          <ul>
            <li><h2>Pretreatment</h2></li>
            <li><p>SS reactor, 25 L double jacket</p></li>
            <li><p>Stirring motor, variable speed.</p></li>
            <li><p>Pneumatic pump.</p></li>
            <li><p>Heating group</p></li>

            <li><h2>Fermentation</h2></li>
            <li><p>SS fermentation reactor, 25 L.</p></li>
            <li><p>Stirring motor, variable speed.</p></li>
            <li><p>Pneumatic pump.</p></li>
            <li><p>Dosing pump.</p></li>
            <li><p>Reagent circuit.</p></li>

            <li><h2>Instrumentation</h2></li>
            <li><p>2 flowmeters.</p></li>
            <li><p>Manometers.</p></li>
            <li><p>pH electrode.</p></li>
            <li><p>6 temperature probes Pt100Ω.</p></li>
          </ul>
        </p>
      </div>
    </div>

    


    <!-- SDK 3DVERSE -->
    <script src="https://cdn.3dverse.com/legacy/sdk/stable/SDK3DVerse.js"></script>
    <script src="https://cdn.3dverse.com/legacy/sdk/stable/SDK3DVerse_ViewportDomOverlay_Ext.js"></script>
		<script src="https://cdn.3dverse.com/legacy/sdk/stable/SDK3DVerse_LabelDisplay_Ext.js"></script>

    <!-- APP ENTRYPOINT -->
    <script src="./3DVerseConfig/main.js" type="module"></script>
    <script src="DataBase.js" type="module"></script>
    <script src="script.js" type="module"></script>
  </body>
</html>
